:root{
  --bg: #0d0f12;
  --surface: #151922;
  --surface-2: #1d2330;
  --text: #e6e9ef;
  --muted: #a6adbb;
  --primary: #5b8cff;
  --primary-2: #3d6ef3;
  --success: #22c55e;
  --warn: #f59e0b;
  --danger: #ef4444;
  --border: #2b3342;
  --card-shadow: 0 6px 24px rgba(0,0,0,0.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  background: var(--bg); color: var(--text);
}
.app-header{
  position: sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding: 10px 14px; background: rgba(13,15,18,0.8); backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}
.header-left{display:flex;align-items:center;gap:10px}
.logo{font-size:20px}
.title{font-weight:700}
.header-nav{display:flex;gap:14px}
.nav-link{color:var(--muted);text-decoration:none;font-size:14px}
.nav-link:hover{color:var(--text)}
@media(max-width:720px){.header-nav{display:none}}

.app-main{padding:12px 12px 100px;}

.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.15));color:var(--text);text-decoration:none;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.25)}
.btn:hover{filter:brightness(1.08)}
.btn:active{transform:translateY(1px)}
.btn.primary{background:linear-gradient(180deg,var(--primary),var(--primary-2));border-color:transparent;color:white}
.btn.danger{background:#301619;border-color:#512025;color:#ffb4b4}
.btn.warn{background:#2d2416;border-color:#4a3a1a;color:#f5d7a6}
.btn.small{padding:6px 10px;border-radius:8px;font-size:13px}
.btn .mdi{font-size:18px;line-height:0}

.card{background:var(--surface);border:1px solid var(--border);border-radius:14px;box-shadow:var(--card-shadow)}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:480px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:720px){.grid{grid-template-columns:repeat(3,1fr)}}

.vehicle-card{overflow:hidden}
.vehicle-card .image{width:100%;aspect-ratio:16/9;background:var(--surface-2);display:block;object-fit:cover;border-bottom:1px solid var(--border)}
.vehicle-card .content{padding:10px}
.vehicle-title{font-weight:700}
.vehicle-sub{color:var(--muted);font-size:13px;margin-top:2px}
.badges{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:var(--surface-2);color:var(--muted)}
.badge.ok{border-color:#1d3b28;color:#a7f3d0;background:#112218}
.badge.soon{border-color:#4a3a1a;color:#fde68a;background:#2d2416}
.badge.due{border-color:#4a1d1d;color:#fecaca;background:#2a1414}

.chips{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.chip{display:inline-flex;align-items:center;gap:6px;font-size:12px;padding:6px 8px;border-radius:10px;background:var(--surface-2);border:1px solid var(--border);color:var(--muted)}
.chip .mdi{font-size:16px}

.toolbar{display:flex;gap:8px;margin:10px 0}

.form{display:flex;flex-direction:column;gap:12px}
.field{display:flex;flex-direction:column;gap:6px}
.field-row{display:flex;gap:8px}
.field-row .field{flex:1}
label{font-size:13px;color:var(--muted)}
input,select,textarea{width:100%;background:var(--surface-2);border:1px solid var(--border);border-radius:10px;padding:10px;color:var(--text)}
textarea{min-height:96px}

.file-row{display:flex;align-items:center;gap:10px}
.file-row input[type=file]{display:none}

/* Thumbnail for receipt/preview images */
.thumb{height:72px;width:auto;max-width:160px;border-radius:8px;border:1px solid var(--border);background:var(--surface-2);object-fit:cover;box-shadow:0 1px 3px rgba(0,0,0,0.2)}
/* Smaller thumbnail inside history list rows */
.entry .thumb{height:56px;max-width:120px}

/* Multi-photo preview grid */
.thumb-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(88px,1fr));gap:8px}
.thumb-item{position:relative}
.thumb-item .thumb{width:100%;height:88px;max-width:none;object-fit:cover}
.thumb-remove{position:absolute;top:4px;right:4px;width:22px;height:22px;border-radius:999px;border:1px solid var(--border);background:rgba(0,0,0,0.55);color:#fff;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:0}
.thumb-remove:hover{filter:brightness(1.2)}
label.mini{font-size:12px;color:var(--muted);display:inline-flex;gap:6px;align-items:center;margin-top:4px}

.kv{display:grid;grid-template-columns:120px 1fr;gap:8px;font-size:14px}
.kv .k{color:var(--muted)}

.section{margin:14px 0;padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--surface)}
.section h3{margin:0 0 8px;font-size:16px}

.list{display:flex;flex-direction:column;gap:8px}
.entry{padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--surface-2)}
.entry .row{display:flex;justify-content:space-between;gap:10px}
.entry .sub{color:var(--muted);font-size:13px}

/* Skeleton loading */
@keyframes shimmer{0%{background-position-x:-200%}100%{background-position-x:200%}}
.skel-rect,.skel-line,.skel-chip,.skel-btn{
  background:linear-gradient(90deg,var(--surface-2) 25%,rgba(255,255,255,0.06) 37%,var(--surface-2) 63%);
  background-size:400% 100%;animation:shimmer 1.2s ease-in-out infinite;border:1px solid var(--border)
}
.skel-rect{width:100%;aspect-ratio:16/9;border-bottom:1px solid var(--border);border-radius:0}
.skel-line{height:12px;margin:8px 0;border-radius:6px}
.skel-chip{width:120px;height:24px;border-radius:10px;display:inline-block}
.skel-btn{width:100px;height:32px;border-radius:8px;display:inline-block}
.w-60{width:60%}.w-40{width:40%}

.fab{position:fixed;bottom:18px;right:18px}

/* Bottom Navigation */
.bottom-nav{
  position:fixed;left:0;right:0;bottom:0;z-index:20;
  display:grid;grid-template-columns:repeat(3,1fr);gap:0;
  background: rgba(13,15,18,0.8);
  backdrop-filter: blur(10px);
  border-top:1px solid var(--border);
  height:64px;padding:6px env(safe-area-inset-right) calc(6px + env(safe-area-inset-bottom)) env(safe-area-inset-left);
}
.bn-item{
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;
  color:var(--muted); text-decoration:none; font-size:12px; border-radius:10px; margin:4px 8px;
  padding:6px 8px;
}
.bn-item .mdi{font-size:22px}
.bn-item.active{color:#fff;background:linear-gradient(180deg, rgba(91,140,255,0.25), rgba(61,110,243,0.12)); border:1px solid var(--border)}

@media(min-width:720px){
  .bottom-nav{display:none}
  .app-main{padding-bottom:24px}
}

.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:var(--surface-2);border:1px solid var(--border);padding:10px 14px;border-radius:12px;display:none}
.toast.show{display:block}

img.preview{max-width:100%;border-radius:10px;border:1px solid var(--border)}
